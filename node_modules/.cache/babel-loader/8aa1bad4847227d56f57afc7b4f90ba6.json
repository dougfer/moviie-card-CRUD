{"ast":null,"code":"import _toConsumableArray from\"/home/douglas/\\xC1rea de Trabalho/Projetos em geral/MovieCard/moviie-card-CRUD/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/douglas/\\xC1rea de Trabalho/Projetos em geral/MovieCard/moviie-card-CRUD/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import data from'./movieData';localStorage.setItem('movies',JSON.stringify(data));var readMovies=function readMovies(){return JSON.parse(localStorage.getItem('movies'));};var saveMovies=function saveMovies(movies){return localStorage.setItem('movies',JSON.stringify(movies));};var TIMEOUT=2000;var SUCCESS_STATUS='OK';// --------------------------------------------------------------------\n// A função simulateRequest simula uma requisição para uma API externa\n// Esse tipo de função que \"chama outra função\" é chamada de\n// \"currying function\" https://javascript.info/currying-partials\n// não se preocupe, estudaremos isso mais futuramente\n// --------------------------------------------------------------------\nvar simulateRequest=function simulateRequest(response){return function(callback){setTimeout(function(){callback(response);},TIMEOUT);};};export var getMovies=function getMovies(){return new Promise(function(resolve){var movies=readMovies();simulateRequest(movies)(resolve);});};export var getMovie=function getMovie(movieId){var movie=readMovies().find(function(mov){return mov.id===parseInt(movieId,10);});return new Promise(function(resolve){simulateRequest(movie)(resolve);});};export var updateMovie=function updateMovie(updatedMovie){return new Promise(function(resolve){var movies=readMovies().map(function(movie){if(movie.id===parseInt(updatedMovie.id,10)){return _objectSpread(_objectSpread({},movie),updatedMovie);}return movie;});saveMovies(movies);simulateRequest(SUCCESS_STATUS)(resolve);});};export var createMovie=function createMovie(movieData){return new Promise(function(resolve){var movies=readMovies();var nextId=movies[movies.length-1].id+1;var newMovie=_objectSpread(_objectSpread({},movieData),{},{id:nextId});movies=[].concat(_toConsumableArray(movies),[newMovie]);saveMovies(movies);simulateRequest(SUCCESS_STATUS)(resolve);});};export var deleteMovie=function deleteMovie(movieId){var movies=readMovies();movies=movies.filter(function(movie){return movie.id!==parseInt(movieId,10);});saveMovies(movies);return new Promise(function(resolve){simulateRequest({status:SUCCESS_STATUS})(resolve);});};","map":{"version":3,"sources":["/home/douglas/Área de Trabalho/Projetos em geral/MovieCard/moviie-card-CRUD/src/services/movieAPI.js"],"names":["data","localStorage","setItem","JSON","stringify","readMovies","parse","getItem","saveMovies","movies","TIMEOUT","SUCCESS_STATUS","simulateRequest","response","callback","setTimeout","getMovies","Promise","resolve","getMovie","movieId","movie","find","mov","id","parseInt","updateMovie","updatedMovie","map","createMovie","movieData","nextId","length","newMovie","deleteMovie","filter","status"],"mappings":"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","sourcesContent":["import data from './movieData';\n\nlocalStorage.setItem('movies', JSON.stringify(data));\n\nconst readMovies = () => JSON.parse(localStorage.getItem('movies'));\nconst saveMovies = (movies) => localStorage.setItem('movies', JSON.stringify(movies));\n\nconst TIMEOUT = 2000;\nconst SUCCESS_STATUS = 'OK';\n\n// --------------------------------------------------------------------\n// A função simulateRequest simula uma requisição para uma API externa\n// Esse tipo de função que \"chama outra função\" é chamada de\n// \"currying function\" https://javascript.info/currying-partials\n// não se preocupe, estudaremos isso mais futuramente\n// --------------------------------------------------------------------\n\nconst simulateRequest = (response) => (callback) => {\n  setTimeout(() => {\n    callback(response);\n  }, TIMEOUT);\n};\n\nexport const getMovies = () => (\n  new Promise((resolve) => {\n    const movies = readMovies();\n    simulateRequest(movies)(resolve);\n  })\n);\n\nexport const getMovie = (movieId) => {\n  const movie = readMovies().find((mov) => mov.id === parseInt(movieId, 10));\n  return new Promise((resolve) => {\n    simulateRequest(movie)(resolve);\n  });\n};\n\nexport const updateMovie = (updatedMovie) => (\n  new Promise((resolve) => {\n    const movies = readMovies().map((movie) => {\n      if (movie.id === parseInt(updatedMovie.id, 10)) {\n        return { ...movie, ...updatedMovie };\n      }\n      return movie;\n    });\n    saveMovies(movies);\n    simulateRequest(SUCCESS_STATUS)(resolve);\n  })\n);\n\nexport const createMovie = (movieData) => (\n  new Promise((resolve) => {\n    let movies = readMovies();\n    const nextId = movies[movies.length - 1].id + 1;\n    const newMovie = { ...movieData, id: nextId };\n    movies = [...movies, newMovie];\n    saveMovies(movies);\n    simulateRequest(SUCCESS_STATUS)(resolve);\n  })\n);\n\nexport const deleteMovie = (movieId) => {\n  let movies = readMovies();\n  movies = movies.filter((movie) => movie.id !== parseInt(movieId, 10));\n  saveMovies(movies);\n\n  return new Promise((resolve) => {\n    simulateRequest({ status: SUCCESS_STATUS })(resolve);\n  });\n};\n"]},"metadata":{},"sourceType":"module"}